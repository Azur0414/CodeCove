<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<!DOCTYPE html>
<html>
<head>
<title>마이페이지</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
</head>
<body>

<h3>마이페이지 내정보변경!!!</h3>

<form action="/profileUpdate.do" method="post" id="proFileUpdateForm" enctype="multipart/form-data">
	<div>
		<img src="${member.memProfile }" id="profileImg" style="width : 100px;" alt="User Profile Image"/><br/>
	</div>
		<input type="file" name="imgFile" id="imgFile"/><br/>
		<input type="hidden" name="report" value="${member.report }"/> 
		아이디 : <input type="text" name="memId" id="memId" value="${member.memId }" readonly/><br/>
		비밀번호 : <input type="password" name="memPass" id="memPass" value="${member.memPass }"/><br/>
		이름 : <input type="text" name="memName" id="memName" value="${member.memName }"/><br/>
		별명 : <input type="text" name="memNick" id="memNick" value="${member.memNick }"/><br/>
		이메일 : <input type="text" name="memMail" id="memMail" value="${member.memMail }"/><br/>
		전화번호 : <input type="text" name="memHP" id="memHP" value="${member.memHP }"/>
		
		<button type="submit">수정</button>
</form>

<script>
$(function() {
	// 이미지 선택시 미리보기
	$("#imgFile").on("change", function(event){
		   var file = event.target.files[0];
		   if(isImageFile(file)){
		      var reader = new FileReader();
		      reader.onload = function(e){
		         $("#profileImg").attr("src", e.target.result);
		      }
		      reader.readAsDataURL(file);
		   }else{
		      alert("이미지 파일을 선택해주세요!");
		   }
		});
	
	//이미지 파일 확인용
	function isImageFile(file){
	   var ext = file.name.split(".").pop().toLowerCase();
	   return ($.inArray(ext,["jpg", "jpeg", "gif", "png"]) === -1 ) ? false : true;
	}
	
	
	
});


</script>
</body>
</html>